<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mFD">
<title>How to Deal With Functional Entities • mFD</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to Deal With Functional Entities">
<meta property="og:description" content="mFD">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mFD</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.7.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/mFD_general_workflow.html">mFD: General Workflow</a>
    <a class="dropdown-item" href="../articles/Compute_and_interpret_quality_of_functional_spaces.html">Compute and Interpret Quality of Functional Spaces</a>
    <a class="dropdown-item" href="../articles/Continuous_traits_framework.html">Continuous Traits Framework</a>
    <a class="dropdown-item" href="../articles/How_to_deal_with_Functional_Entities.html">How to Deal With Functional Entities</a>
    <a class="dropdown-item" href="../articles/Compute_functional_hill_indices.html">Compute Functional Diversity Hill Indices</a>
    <a class="dropdown-item" href="../articles/Customised_plots.html">Customised plots</a>
    <a class="dropdown-item" href="../articles/FAQ.html">FAQ</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CmlMagneville/mFD/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>How to Deal With Functional Entities</h1>
                        <h4 data-toc-skip class="author">Camille
Magneville</h4>
            
            <h4 data-toc-skip class="date">2024-12-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/CmlMagneville/mFD/blob/HEAD/vignettes/How_to_deal_with_Functional_Entities.Rmd" class="external-link"><code>vignettes/How_to_deal_with_Functional_Entities.Rmd</code></a></small>
      <div class="d-none name"><code>How_to_deal_with_Functional_Entities.Rmd</code></div>
    </div>

    
    
<p><br></p>
<div class="section level2">
<h2 id="why-functional-entities-fes">1. Why Functional Entities (FEs)?<a class="anchor" aria-label="anchor" href="#why-functional-entities-fes"></a>
</h2>
<p><br></p>
<p><code>mFD</code> allows gathering species into <strong>functional
entities (FEs)</strong> <em>i.e.</em> <strong>groups of species with
same trait values</strong> when many species are described with a few
categorical or ordinal traits. It is particularly useful when using
large datasets with “functionally similar” species. FEs also allow to
understand the links between functional diversity and ecological
processes as redundant species that are supposed to have similar
ecological roles are clustered in this method.</p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="tutorials-data">2. Tutorial’s data<a class="anchor" aria-label="anchor" href="#tutorials-data"></a>
</h2>
<p><br></p>
<p><strong>DATA</strong> The dataset used to illustrate this tutorial is
a <strong>fruits dataset</strong> based on 25 types of fruits
(<em>i.e.</em> species) distributed in 10 fruit baskets (<em>i.e.</em>
assemblages). Each fruit is characterized by six trait values summarized
in the following table:</p>
<p><br></p>
<table class="table">
<colgroup>
<col width="14%">
<col width="19%">
<col width="14%">
<col width="20%">
<col width="23%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="center">Trait name</th>
<th align="center">Trait measurement</th>
<th align="center">Trait type</th>
<th align="center">Number of classes</th>
<th align="center">Classes code</th>
<th align="center">Unit</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Size</td>
<td align="center">Maximal diameter</td>
<td align="center">Ordinal</td>
<td align="center">5</td>
<td align="center">small ; medium ; large</td>
<td align="center">cm</td>
</tr>
<tr class="even">
<td align="center">Plant</td>
<td align="center">Growth form</td>
<td align="center">Categorical</td>
<td align="center">4</td>
<td align="center">tree ; not tree</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">Climate</td>
<td align="center">Climatic niche</td>
<td align="center">Ordinal</td>
<td align="center">3</td>
<td align="center">temperate ; tropical</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">Seed</td>
<td align="center">Seed type</td>
<td align="center">Ordinal</td>
<td align="center">3</td>
<td align="center">none ; pip ; pit</td>
<td align="center">NA</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>NOTE</strong> We reduced the dataset used in <a href="https://cmlmagneville.github.io/mFD/articles/mFD_general_workflow.html">mFD
General Workflow</a> to only keep ordinal and categorical traits.
Categorical traits are restrained to 2 or 3 modalities per traits to
limit the number of unique combinations.</p>
<p><br></p>
<p>The following data frame and matrix are needed:</p>
<ul>
<li>the data frame summarizing traits values for each species called
<em>fruits_traits</em> data frame in this tutorial:</li>
</ul>
<p><br></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fruits_traits"</span>, package <span class="op">=</span> <span class="st">"mFD"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fruits_traits</span> <span class="op">&lt;-</span> <span class="va">fruits_traits</span><span class="op">[</span> , <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>      <span class="co"># only keep the first 4 traits to illustrate FEs</span></span>
<span></span>
<span><span class="co"># Decrease the number of modalities per trait for convenience ...</span></span>
<span><span class="co"># ... (to have less unique combinations of trait values):</span></span>
<span></span>
<span><span class="co"># Size grouped into only 3 categories:</span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Size"</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Size"</span><span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0-1cm"</span>, <span class="st">"1-3cm"</span>, <span class="st">"3-5cm"</span><span class="op">)</span><span class="op">)</span>, <span class="st">"Size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"small"</span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Size"</span><span class="op">]</span> <span class="op">==</span> <span class="st">"5-10cm"</span><span class="op">)</span>, <span class="st">"Size"</span><span class="op">]</span>  <span class="op">&lt;-</span> <span class="st">"medium"</span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Size"</span><span class="op">]</span> <span class="op">==</span> <span class="st">"10-20cm"</span><span class="op">)</span>, <span class="st">"Size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"large"</span></span>
<span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span>, <span class="st">"Size"</span><span class="op">]</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="st">"medium"</span>, <span class="st">"large"</span><span class="op">)</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plant type grouped into only 2 categories:</span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Plant"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span>, <span class="st">"Plant"</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Plant"</span><span class="op">]</span> <span class="op">!=</span> <span class="st">"tree"</span><span class="op">)</span>, <span class="st">"Plant"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Not_tree"</span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Plant"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Plant"</span><span class="op">]</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Not_tree"</span>, <span class="st">"tree"</span><span class="op">)</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plant Origin grouped into only 2 categories:</span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Climate"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Climate"</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Climate"</span><span class="op">]</span> <span class="op">!=</span> <span class="st">"temperate"</span><span class="op">)</span>, <span class="st">"Climate"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"tropical"</span></span>
<span><span class="va">fruits_traits</span><span class="op">[</span> , <span class="st">"Climate"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">[</span>, <span class="st">"Climate"</span><span class="op">]</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperate"</span>, <span class="st">"tropical"</span><span class="op">)</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the table:</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fruits_traits</span><span class="op">)</span>, caption <span class="op">=</span> <span class="st">"Species x traits dataframe based on *fruits* dataset"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Species x traits dataframe based on <em>fruits</em>
dataset</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">Size</th>
<th align="left">Plant</th>
<th align="left">Climate</th>
<th align="left">Seed</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">apple</td>
<td align="left">medium</td>
<td align="left">tree</td>
<td align="left">temperate</td>
<td align="left">pip</td>
</tr>
<tr class="even">
<td align="left">apricot</td>
<td align="left">small</td>
<td align="left">tree</td>
<td align="left">temperate</td>
<td align="left">pit</td>
</tr>
<tr class="odd">
<td align="left">banana</td>
<td align="left">large</td>
<td align="left">tree</td>
<td align="left">tropical</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">currant</td>
<td align="left">small</td>
<td align="left">Not_tree</td>
<td align="left">temperate</td>
<td align="left">pip</td>
</tr>
<tr class="odd">
<td align="left">blackberry</td>
<td align="left">small</td>
<td align="left">Not_tree</td>
<td align="left">temperate</td>
<td align="left">pip</td>
</tr>
<tr class="even">
<td align="left">blueberry</td>
<td align="left">small</td>
<td align="left">Not_tree</td>
<td align="left">temperate</td>
<td align="left">pip</td>
</tr>
</tbody>
</table>
<p><br></p>
<ul>
<li>the matrix summarizing assemblages called
<em>basket_fruits_weights</em> in this tutorial:</li>
</ul>
<p><br></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"baskets_fruits_weights"</span>, package <span class="op">=</span> <span class="st">"mFD"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">baskets_fruits_weights</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">"Species x assemblages dataframe based on *fruits* dataset"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Species x assemblages dataframe based on <em>fruits</em>
dataset</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="right">apple</th>
<th align="right">apricot</th>
<th align="right">banana</th>
<th align="right">currant</th>
<th align="right">blackberry</th>
<th align="right">blueberry</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">basket_1</td>
<td align="right">400</td>
<td align="right">0</td>
<td align="right">100</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">basket_2</td>
<td align="right">200</td>
<td align="right">0</td>
<td align="right">400</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">basket_3</td>
<td align="right">200</td>
<td align="right">0</td>
<td align="right">500</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">basket_4</td>
<td align="right">300</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">basket_5</td>
<td align="right">200</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">basket_6</td>
<td align="right">100</td>
<td align="right">0</td>
<td align="right">200</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><br></p>
<ul>
<li>the data frame summarizing traits categories called
<em>fruits_traits_cat</em> in this tutorial: (for details: <a href="https://cmlmagneville.github.io/mFD/articles/mFD_general_workflow.html">mFD
General Workflow</a>)</li>
</ul>
<p><br></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fruits_traits_cat"</span>, package <span class="op">=</span> <span class="st">"mFD"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># only keep traits 1 - 4:</span></span>
<span><span class="va">fruits_traits_cat</span> <span class="op">&lt;-</span> <span class="va">fruits_traits_cat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="op">]</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fruits_traits_cat</span><span class="op">)</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">"Traits types based on *fruits &amp; baskets* dataset"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Traits types based on <em>fruits &amp; baskets</em>
dataset</caption>
<thead><tr class="header">
<th align="left">trait_name</th>
<th align="left">trait_type</th>
<th align="left">fuzzy_name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Size</td>
<td align="left">O</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Plant</td>
<td align="left">N</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Climate</td>
<td align="left">O</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Seed</td>
<td align="left">O</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Using the <code><a href="../reference/asb.sp.summary.html">mFD::asb.sp.summary()</a></code> function, we can sum up
the assemblages data and retrieve species occurrence data:</p>
<p><br></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># summarize species assemblages: </span></span>
<span><span class="va">asb_sp_fruits_summ</span> <span class="op">&lt;-</span> <span class="fu">mFD</span><span class="fu">::</span><span class="fu"><a href="../reference/asb.sp.summary.html">asb.sp.summary</a></span><span class="op">(</span><span class="va">baskets_fruits_weights</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># retrieve species occurrences for the first 3 assemblages (fruits baskets):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">asb_sp_fruits_summ</span><span class="op">$</span><span class="va">asb_sp_occ</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##          apple apricot banana currant blackberry blueberry cherry grape</span></span>
<span><span class="co">## basket_1     1       0      1       0          0         0      1     0</span></span>
<span><span class="co">## basket_2     1       0      1       0          0         0      1     0</span></span>
<span><span class="co">## basket_3     1       0      1       0          0         0      1     0</span></span>
<span><span class="co">##          grapefruit kiwifruit lemon lime litchi mango melon orange</span></span>
<span><span class="co">## basket_1          0         0     1    0      0     0     1      0</span></span>
<span><span class="co">## basket_2          0         0     1    0      0     0     1      0</span></span>
<span><span class="co">## basket_3          0         0     1    0      0     0     1      0</span></span>
<span><span class="co">##          passion_fruit peach pear pineapple plum raspberry strawberry tangerine</span></span>
<span><span class="co">## basket_1             1     0    1         0    0         0          1         0</span></span>
<span><span class="co">## basket_2             1     0    1         0    0         0          1         0</span></span>
<span><span class="co">## basket_3             1     0    1         0    0         0          1         0</span></span>
<span><span class="co">##          water_melon</span></span>
<span><span class="co">## basket_1           0</span></span>
<span><span class="co">## basket_2           0</span></span>
<span><span class="co">## basket_3           0</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">asb_sp_fruits_occ</span> <span class="op">&lt;-</span> <span class="va">asb_sp_fruits_summ</span><span class="op">$</span><span class="st">"asb_sp_occ"</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="gather-species-into-fes">3. Gather species into FEs<a class="anchor" aria-label="anchor" href="#gather-species-into-fes"></a>
</h2>
<p><br></p>
<p><code>mFD</code> allows you to gather species into FEs using the
<code><a href="../reference/sp.to.fe.html">mFD::sp.to.fe()</a></code> function. It uses the following
arguments:</p>
<p><br></p>
<p><strong>USAGE</strong></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mFD</span><span class="fu">::</span><span class="fu"><a href="../reference/sp.to.fe.html">sp.to.fe</a></span><span class="op">(</span></span>
<span>  sp_tr       <span class="op">=</span> <span class="va">fruits_traits</span>, </span>
<span>  tr_cat      <span class="op">=</span> <span class="va">fruits_traits_cat</span>, </span>
<span>  fe_nm_type  <span class="op">=</span> <span class="st">"fe_rank"</span>, </span>
<span>  check_input <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<p><br></p>
<ul>
<li>
<em>sp_tr</em> the data frame of species traits</li>
<li>
<em>tr_cat</em> the data frame summarizing traits categories</li>
<li>
<em>fe_nm_type</em> is a character string referring to the way FEs
should be named: they can be named after their decreasing rank in term
of number of species (<em>i.e. fe_1 is the one gathering most
species</em>) (<em>fe_rank</em>) or they can be named after names of
traits</li>
<li>
<em>check_input</em> is a logical value reflecting whether inputs
should be checked or not. Possible error messages will thus be more
understandable for the user than R error messages <strong>NOTE</strong>
Recommendation: set it as <code>TRUE</code>
</li>
</ul>
<p>Let’s use this function with the <em>fruits dataset</em>:</p>
<p><br></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sp_to_fe_fruits</span> <span class="op">&lt;-</span> <span class="fu">mFD</span><span class="fu">::</span><span class="fu"><a href="../reference/sp.to.fe.html">sp.to.fe</a></span><span class="op">(</span></span>
<span>  sp_tr       <span class="op">=</span> <span class="va">fruits_traits</span>, </span>
<span>  tr_cat      <span class="op">=</span> <span class="va">fruits_traits_cat</span>, </span>
<span>  fe_nm_type  <span class="op">=</span> <span class="st">"fe_rank"</span>, </span>
<span>  check_input <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<p><br></p>
<p><code><a href="../reference/sp.to.fe.html">mFD::sp.to.fe()</a></code> returns:</p>
<ul>
<li>a vector containing FEs names: <br>
</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sp_to_fe_fruits</span><span class="op">$</span><span class="st">"fe_nm"</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "fe_1"  "fe_2"  "fe_3"  "fe_4"  "fe_5"  "fe_6"  "fe_7"  "fe_8"  "fe_9" </span></span>
<span><span class="co">## [10] "fe_10" "fe_11" "fe_12" "fe_13" "fe_14"</span></span></code></pre>
<p><br></p>
<ul>
<li>a vector containing for each species, the FE it belongs to:
<br>
</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sp_fe</span> <span class="op">&lt;-</span> <span class="va">sp_to_fe_fruits</span><span class="op">$</span><span class="st">"sp_fe"</span></span>
<span><span class="va">sp_fe</span></span></code></pre></div>
<pre><code><span><span class="co">##         apple       apricot        banana       currant    blackberry </span></span>
<span><span class="co">##        "fe_3"        "fe_2"        "fe_7"        "fe_1"        "fe_1" </span></span>
<span><span class="co">##     blueberry        cherry         grape    grapefruit     kiwifruit </span></span>
<span><span class="co">##        "fe_1"        "fe_2"        "fe_1"        "fe_8"        "fe_9" </span></span>
<span><span class="co">##         lemon          lime        litchi         mango         melon </span></span>
<span><span class="co">##        "fe_4"        "fe_5"       "fe_10"       "fe_11"        "fe_6" </span></span>
<span><span class="co">##        orange passion_fruit         peach          pear     pineapple </span></span>
<span><span class="co">##        "fe_4"       "fe_12"       "fe_13"        "fe_3"       "fe_14" </span></span>
<span><span class="co">##          plum     raspberry    strawberry     tangerine   water_melon </span></span>
<span><span class="co">##        "fe_2"        "fe_1"        "fe_1"        "fe_5"        "fe_6"</span></span></code></pre>
<p><br></p>
<ul>
<li>a data frame containing for FEs, the values of traits for each
FE:</li>
</ul>
<p><br></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fe_tr</span> <span class="op">&lt;-</span> <span class="va">sp_to_fe_fruits</span><span class="op">$</span><span class="st">"fe_tr"</span></span>
<span><span class="va">fe_tr</span></span></code></pre></div>
<pre><code><span><span class="co">##         Size    Plant   Climate Seed</span></span>
<span><span class="co">## fe_1   small Not_tree temperate  pip</span></span>
<span><span class="co">## fe_2   small     tree temperate  pit</span></span>
<span><span class="co">## fe_3  medium     tree temperate  pip</span></span>
<span><span class="co">## fe_4  medium     tree  tropical  pip</span></span>
<span><span class="co">## fe_5   small     tree  tropical  pip</span></span>
<span><span class="co">## fe_6   large Not_tree temperate  pip</span></span>
<span><span class="co">## fe_7   large     tree  tropical none</span></span>
<span><span class="co">## fe_8   large     tree  tropical  pip</span></span>
<span><span class="co">## fe_9  medium Not_tree temperate  pip</span></span>
<span><span class="co">## fe_10  small     tree  tropical  pit</span></span>
<span><span class="co">## fe_11  large     tree  tropical  pit</span></span>
<span><span class="co">## fe_12  small Not_tree  tropical  pip</span></span>
<span><span class="co">## fe_13 medium     tree temperate  pit</span></span>
<span><span class="co">## fe_14  large Not_tree  tropical none</span></span></code></pre>
<p><br></p>
<ul>
<li>a vector containing the number of species per FE:</li>
</ul>
<p><br></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fe_nb_sp</span> <span class="op">&lt;-</span> <span class="va">sp_to_fe_fruits</span><span class="op">$</span><span class="st">"fe_nb_sp"</span></span>
<span><span class="va">fe_nb_sp</span></span></code></pre></div>
<pre><code><span><span class="co">##  fe_1  fe_2  fe_3  fe_4  fe_5  fe_6  fe_7  fe_8  fe_9 fe_10 fe_11 fe_12 fe_13 </span></span>
<span><span class="co">##     6     3     2     2     2     2     1     1     1     1     1     1     1 </span></span>
<span><span class="co">## fe_14 </span></span>
<span><span class="co">##     1</span></span></code></pre>
<p><br></p>
<ul>
<li>a detailed list containing vectors or list with supplementary
information about FEs:</li>
</ul>
<p><br></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sp_to_fe_fruits</span><span class="op">$</span><span class="st">"details_fe"</span></span></code></pre></div>
<pre><code><span><span class="co">## $fe_codes</span></span>
<span><span class="co">##                                                fe_1 </span></span>
<span><span class="co">##  "SIZEsmall_PLANTnot_tree_CLIMATEtemperate_SEEDpip" </span></span>
<span><span class="co">##                                                fe_2 </span></span>
<span><span class="co">##      "SIZEsmall_PLANTtree_CLIMATEtemperate_SEEDpit" </span></span>
<span><span class="co">##                                                fe_3 </span></span>
<span><span class="co">##     "SIZEmedium_PLANTtree_CLIMATEtemperate_SEEDpip" </span></span>
<span><span class="co">##                                                fe_4 </span></span>
<span><span class="co">##      "SIZEmedium_PLANTtree_CLIMATEtropical_SEEDpip" </span></span>
<span><span class="co">##                                                fe_5 </span></span>
<span><span class="co">##       "SIZEsmall_PLANTtree_CLIMATEtropical_SEEDpip" </span></span>
<span><span class="co">##                                                fe_6 </span></span>
<span><span class="co">##  "SIZElarge_PLANTnot_tree_CLIMATEtemperate_SEEDpip" </span></span>
<span><span class="co">##                                                fe_7 </span></span>
<span><span class="co">##      "SIZElarge_PLANTtree_CLIMATEtropical_SEEDnone" </span></span>
<span><span class="co">##                                                fe_8 </span></span>
<span><span class="co">##       "SIZElarge_PLANTtree_CLIMATEtropical_SEEDpip" </span></span>
<span><span class="co">##                                                fe_9 </span></span>
<span><span class="co">## "SIZEmedium_PLANTnot_tree_CLIMATEtemperate_SEEDpip" </span></span>
<span><span class="co">##                                               fe_10 </span></span>
<span><span class="co">##       "SIZEsmall_PLANTtree_CLIMATEtropical_SEEDpit" </span></span>
<span><span class="co">##                                               fe_11 </span></span>
<span><span class="co">##       "SIZElarge_PLANTtree_CLIMATEtropical_SEEDpit" </span></span>
<span><span class="co">##                                               fe_12 </span></span>
<span><span class="co">##   "SIZEsmall_PLANTnot_tree_CLIMATEtropical_SEEDpip" </span></span>
<span><span class="co">##                                               fe_13 </span></span>
<span><span class="co">##     "SIZEmedium_PLANTtree_CLIMATEtemperate_SEEDpit" </span></span>
<span><span class="co">##                                               fe_14 </span></span>
<span><span class="co">##  "SIZElarge_PLANTnot_tree_CLIMATEtropical_SEEDnone" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $tr_uval</span></span>
<span><span class="co">## $tr_uval$Size</span></span>
<span><span class="co">## [1] "medium" "small"  "large" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $tr_uval$Plant</span></span>
<span><span class="co">## [1] "tree"     "Not_tree"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $tr_uval$Climate</span></span>
<span><span class="co">## [1] "temperate" "tropical" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $tr_uval$Seed</span></span>
<span><span class="co">## [1] "pip"  "pit"  "none"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $tr_nb_uval</span></span>
<span><span class="co">##    Size   Plant Climate    Seed </span></span>
<span><span class="co">##       3       2       2       3 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $max_nb_fe</span></span>
<span><span class="co">## [1] 36</span></span></code></pre>
<p><br></p>
</div>
<div class="section level2">
<h2 id="compute-alpha-and-beta-functional-indices">4. Compute alpha and beta functional indices<a class="anchor" aria-label="anchor" href="#compute-alpha-and-beta-functional-indices"></a>
</h2>
<p><br></p>
<p>Then based on the data frame containing the value of traits for each
FE, the workflow is the same as the one listed in <a href="https://cmlmagneville.github.io/mFD/articles/mFD_general_workflow.html">mFD
General Workflow</a> to compute functional trait based distance,
multidimensional functional space and associated plots and compute alpha
and beta functional indices (step 3 till the end). It will thus not be
summed up in this tutorial.</p>
<p><br></p>
<p><code>mFD</code> also allows to compute functional indices based on
FEs following the framework proposed in <a href="https://www.pnas.org/doi/abs/10.1073/pnas.1317625111" class="external-link">Mouillot
<em>et al.</em> 2014</a>) using the <code><a href="../reference/alpha.fd.fe.html">mFD::alpha.fd.fe()</a></code>
function. It computes:</p>
<ul>
<li>
<em>Functional Redundancy</em> that reflects the average number of
species per FE</li>
<li>
<em>Functional Overredundancy</em> that reflects the proportion of
species in excess in species-rich FE <em>ie</em> it represents the
percentage of species that fill functional entities above the mean level
of functional redundancy</li>
<li>
<em>Functional Vulnerability</em> that reflects the proportion of FE
with only one species</li>
</ul>
<p><br></p>
<p><code><a href="../reference/alpha.fd.fe.html">mFD::alpha.fd.fe()</a></code> function is used as follows:</p>
<p><br></p>
<p><strong>USAGE</strong></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mFD</span><span class="fu">::</span><span class="fu"><a href="../reference/alpha.fd.fe.html">alpha.fd.fe</a></span><span class="op">(</span></span>
<span>  asb_sp_occ       <span class="op">=</span> <span class="va">asb_sp_fruits_occ</span>, </span>
<span>  sp_to_fe         <span class="op">=</span> <span class="va">sp_to_fe_fruits</span>,</span>
<span>  ind_nm           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fred"</span>, <span class="st">"fored"</span>, <span class="st">"fvuln"</span><span class="op">)</span>,</span>
<span>  check_input      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  details_returned <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<p><br></p>
<p>It takes as inputs:</p>
<ul>
<li>
<em>asb_sp_occ</em> the assemblages-species occurrence dataframe
retrieved on <strong>step 2</strong> with
<code><a href="../reference/sp.tr.summary.html">mFD::sp.tr.summary()</a></code> function</li>
<li>
<em>sp_to_fe</em> a list with details of species clustering into FE
from <code><a href="../reference/sp.to.fe.html">mFD::sp.to.fe()</a></code>
</li>
<li>
<em>ind_nm</em> a vector referring to the indices to compute:
<em>fred</em> for Functional Redundancy, <em>fored</em> for Functional
Overredundancy and <em>fvuln</em> for Functional Vulnerability.</li>
<li>
<em>check_input</em> is a logical value reflecting whether inputs
should be checked or not. Possible error messages will thus be more
understandable for the user than R error messages <strong>NOTE</strong>
Recommendation: set it as <code>TRUE</code>.</li>
<li>
<em>details_returned</em> is a logical value indicating whether the
user wants to details_returned. Details are used in graphical functions
and thus must be kept if the user want to have graphical outputs for the
computed indices.</li>
</ul>
<p><br></p>
<p>Let’s apply this function with the <em>fruits</em> dataset:</p>
<p><br></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alpha_fd_fe_fruits</span> <span class="op">&lt;-</span> <span class="fu">mFD</span><span class="fu">::</span><span class="fu"><a href="../reference/alpha.fd.fe.html">alpha.fd.fe</a></span><span class="op">(</span></span>
<span>  asb_sp_occ       <span class="op">=</span> <span class="va">asb_sp_fruits_occ</span>, </span>
<span>  sp_to_fe         <span class="op">=</span> <span class="va">sp_to_fe_fruits</span>,</span>
<span>  ind_nm           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fred"</span>, <span class="st">"fored"</span>, <span class="st">"fvuln"</span><span class="op">)</span>,</span>
<span>  check_input      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  details_returned <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<p><br></p>
<p>This function returns a dataframe of indices values for each
assemblage and a detailed list containing a matrix gathering the number
of species per FE in each assemblage:</p>
<p><br></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dataframe with indices values for each assemblage:</span></span>
<span><span class="va">alpha_fd_fe_fruits</span><span class="op">$</span><span class="st">"asb_fdfe"</span></span></code></pre></div>
<pre><code><span><span class="co">##           nb_sp nb_fe     fred     fored     fvuln</span></span>
<span><span class="co">## basket_1      8     7 1.142857 0.1071429 0.8571429</span></span>
<span><span class="co">## basket_2      8     7 1.142857 0.1071429 0.8571429</span></span>
<span><span class="co">## basket_3      8     7 1.142857 0.1071429 0.8571429</span></span>
<span><span class="co">## basket_4      8     6 1.333333 0.1666667 0.6666667</span></span>
<span><span class="co">## basket_5      8     6 1.333333 0.1666667 0.6666667</span></span>
<span><span class="co">## basket_6      8     8 1.000000 0.0000000 1.0000000</span></span>
<span><span class="co">## basket_7      8     8 1.000000 0.0000000 1.0000000</span></span>
<span><span class="co">## basket_8      8     3 2.666667 0.4166667 0.6666667</span></span>
<span><span class="co">## basket_9      8     3 2.666667 0.4166667 0.6666667</span></span>
<span><span class="co">## basket_10     8     5 1.600000 0.1500000 0.4000000</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a matrix gathering the number of species per FE in each assemblage</span></span>
<span><span class="va">alpha_fd_fe_fruits</span><span class="op">$</span><span class="st">"details_fdfe"</span></span></code></pre></div>
<pre><code><span><span class="co">## $asb_fe_nbsp</span></span>
<span><span class="co">##           fe_3 fe_2 fe_7 fe_1 fe_8 fe_9 fe_4 fe_5 fe_10 fe_11 fe_6 fe_12 fe_13</span></span>
<span><span class="co">## basket_1     2    1    1    1    0    0    1    0     0     0    1     1     0</span></span>
<span><span class="co">## basket_2     2    1    1    1    0    0    1    0     0     0    1     1     0</span></span>
<span><span class="co">## basket_3     2    1    1    1    0    0    1    0     0     0    1     1     0</span></span>
<span><span class="co">## basket_4     2    1    0    0    0    1    2    1     0     0    0     0     1</span></span>
<span><span class="co">## basket_5     2    1    0    0    0    1    2    1     0     0    0     0     1</span></span>
<span><span class="co">## basket_6     1    0    1    0    0    0    1    1     1     1    1     0     0</span></span>
<span><span class="co">## basket_7     1    0    1    0    0    0    1    1     1     1    1     0     0</span></span>
<span><span class="co">## basket_8     0    1    0    6    0    0    1    0     0     0    0     0     0</span></span>
<span><span class="co">## basket_9     0    1    0    6    0    0    1    0     0     0    0     0     0</span></span>
<span><span class="co">## basket_10    2    2    0    2    1    0    0    0     0     0    1     0     0</span></span>
<span><span class="co">##           fe_14</span></span>
<span><span class="co">## basket_1      0</span></span>
<span><span class="co">## basket_2      0</span></span>
<span><span class="co">## basket_3      0</span></span>
<span><span class="co">## basket_4      0</span></span>
<span><span class="co">## basket_5      0</span></span>
<span><span class="co">## basket_6      1</span></span>
<span><span class="co">## basket_7      1</span></span>
<span><span class="co">## basket_8      0</span></span>
<span><span class="co">## basket_9      0</span></span>
<span><span class="co">## basket_10     0</span></span></code></pre>
<p><br></p>
</div>
<div class="section level2">
<h2 id="plot-functional-indices-based-on-fes">5. Plot functional indices based on FEs<a class="anchor" aria-label="anchor" href="#plot-functional-indices-based-on-fes"></a>
</h2>
<p><br></p>
<p>Then, it is possible to have a graphical representation of FE-based
indices for a given assemblage using the
<code>mFD::alpha.fe.fd.plot()</code> function:</p>
<p><br></p>
<p><strong>USAGE</strong></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mFD</span><span class="fu">::</span><span class="fu"><a href="../reference/alpha.fd.fe.plot.html">alpha.fd.fe.plot</a></span><span class="op">(</span></span>
<span>  alpha_fd_fe       <span class="op">=</span> <span class="va">alpha_fd_fe_fruits</span>,</span>
<span>  plot_asb_nm       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"basket_1"</span><span class="op">)</span>,</span>
<span>  plot_ind_nm       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fred"</span>, <span class="st">"fored"</span>, <span class="st">"fvuln"</span><span class="op">)</span>,</span>
<span>  name_file         <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  color_fill_fored  <span class="op">=</span> <span class="st">"darkolivegreen2"</span>,</span>
<span>  color_line_fred   <span class="op">=</span> <span class="st">"darkolivegreen4"</span>,</span>
<span>  color_fill_bar    <span class="op">=</span> <span class="st">"grey80"</span>,</span>
<span>  color_fill_fvuln  <span class="op">=</span> <span class="st">"lightcoral"</span>,</span>
<span>  color_arrow_fvuln <span class="op">=</span> <span class="st">"indianred4"</span>,</span>
<span>  size_line_fred    <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  size_arrow_fvuln  <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  check_input       <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<p>This function takes as inputs:</p>
<ul>
<li>
<em>alpha_fe_fe_fruits</em> the output from the function
<code><a href="../reference/alpha.fd.fe.html">mFD::alpha.fd.fe()</a></code> applied on assemblage of interest with
<code>details_returned = TRUE</code>
</li>
<li>
<em>plot_asb_nm</em> a vector containing the name of the assemblage
to plot</li>
<li>
<em>plot_ind_nm</em> a vector containing the names of the indices to
plot. It <code>fred</code> to plot functional redundancy (FRed),
<code>fored</code> to plot functional over-redundancy (FOred) and/or
<code>fvuln</code> to plot functional vulnerability (FVuln)</li>
<li>
<em>name_file</em> a character string with name of file to save the
figure. If set to <code>NULL</code> the plot is only displayed</li>
<li>inputs to personalize the plot (for details: see help file of the
<code><a href="../reference/alpha.fd.fe.plot.html">mFD::alpha.fd.fe.plot</a></code>)</li>
<li>
<em>check_input</em> is a logical value reflecting whether inputs
should be checked or not. Possible error messages will thus be more
understandable for the user than R error messages <strong>NOTE</strong>
Recommendation: set it as <code>TRUE</code>
</li>
</ul>
<p><br></p>
<p>For the studied example, the plot looks as follows:</p>
<p><br></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mFD</span><span class="fu">::</span><span class="fu"><a href="../reference/alpha.fd.fe.plot.html">alpha.fd.fe.plot</a></span><span class="op">(</span></span>
<span>  alpha_fd_fe       <span class="op">=</span> <span class="va">alpha_fd_fe_fruits</span>,</span>
<span>  plot_asb_nm       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"basket_1"</span><span class="op">)</span>,</span>
<span>  plot_ind_nm       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fred"</span>, <span class="st">"fored"</span>, <span class="st">"fvuln"</span><span class="op">)</span>,</span>
<span>  name_file         <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  color_fill_fored  <span class="op">=</span> <span class="st">"darkolivegreen2"</span>,</span>
<span>  color_line_fred   <span class="op">=</span> <span class="st">"darkolivegreen4"</span>,</span>
<span>  color_fill_bar    <span class="op">=</span> <span class="st">"grey80"</span>,</span>
<span>  color_fill_fvuln  <span class="op">=</span> <span class="st">"lightcoral"</span>,</span>
<span>  color_arrow_fvuln <span class="op">=</span> <span class="st">"indianred4"</span>,</span>
<span>  size_line_fred    <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  size_arrow_fvuln  <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  check_input       <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in ggplot2::geom_segment(ggplot2::aes(x = fe_vuln_k[1], y = 0.5, : All aesthetics have length 1, but the data has 7 rows.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span></span>
<span><span class="co">##   a single row.</span></span></code></pre>
<p><img src="How_to_deal_with_Functional_Entities_files/figure-html/unnamed-chunk-16-1.png" width="1152" style="display: block; margin: auto;"></p>
<p><br></p>
<p>All FE except “fe_3” contain only one species thus FRed and FVuln are
close to 1. Only “fe_3” has more species than the average number of
species thus the proportion of species in excess in FE richer than
average is quite low (FORed = 0.107).</p>
<p><br></p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p><br></p>
<ul>
<li>Mouillot <em>et al.</em> (2014) Functional over-redundancy and high
functional vulnerability in global fish faunas on tropical reefs.
<em>PNAS</em>, <strong>38</strong>, 13757-13762.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Camille Magneville, Nicolas Loiseau, Camille Albouy, Nicolas Casajus, Thomas Claverie, Arthur Escalas, Fabien Leprieur, Eva Maire, David Mouillot, Sebastien Villeger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
